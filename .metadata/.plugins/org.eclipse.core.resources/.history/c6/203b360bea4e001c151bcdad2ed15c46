grammar org.xtext.example.iotdsl.IotDsl with org.eclipse.xtext.common.Terminals

generate iotDsl "http://www.xtext.org/example/iotdsl/IotDsl"

//Model:
//	devices+=Ambiente*;
//
//Ambiente:
//	Entidade
//;	
//
//enum AmbienteEstado:
//    ABERTO | VAZIO | CHEIO | FECHADO;
//
//enum acoesPossiveis:
//	LIGAR | DESLIGAR | AUMENTAR | DIMINUIR;
//    
//Estado:
//	value=AmbienteEstado;	
//
//Dispositivo:
//	name=ID;	
//
//Condicao:
//	'condicao' name=ID ':' estado=[Estado];
//
//Acao:
//	name=ID (value=acoesPossiveis)? valor=INT;
//		
//Regra:
//	'regra' name=ID ':' '(' d=Dispositivo ',' a=Acao ')';
//	
//Feature:
//    name=ID ':' type=ID (value=AmbienteEstado)?;
//    
//Entidade:
//    'criar' name=ID '{'
//        (features+=Feature)*
//    '}';
// 
   	
IotDsl:
	{IotDsl} 
	('eventos' eventos+=Evento+ 
	'end')?
	('resetEventos' (resetEventos+=[Evento])* 
	'end')?
	'comandos' (comandos+=Comando)* 
	'end')?
	(estados+=Estado)*;

Evento:
  name=ID code=ID;

Comando:
  name=ID code=ID;

Estado:
  'estado' name=ID
  ('acoes' '{' (acoes+=[Comando])+ '}')?
  (transacoes+=Transacao)*
  'end';

Transacao:
  evento=[Evento] '=>' estado=[Estado];


