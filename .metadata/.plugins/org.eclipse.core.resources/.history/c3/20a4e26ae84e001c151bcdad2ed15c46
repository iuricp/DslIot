grammar org.xtext.example.iotdsl.IotDsl with org.eclipse.xtext.common.Terminals

generate iotDsl "http://www.xtext.org/example/iotdsl/IotDsl"

//Model:
//	devices+=Ambiente*;
//
//Ambiente:
//	Entidade
//;	
//
//enum AmbienteEstado:
//    ABERTO | VAZIO | CHEIO | FECHADO;
//
//enum acoesPossiveis:
//	LIGAR | DESLIGAR | AUMENTAR | DIMINUIR;
//    
//Estado:
//	value=AmbienteEstado;	
//
//Dispositivo:
//	name=ID;	
//
//Condicao:
//	'condicao' name=ID ':' estado=[Estado];
//
//Acao:
//	name=ID (value=acoesPossiveis)? valor=INT;
//		
//Regra:
//	'regra' name=ID ':' '(' d=Dispositivo ',' a=Acao ')';
//	
//Feature:
//    name=ID ':' type=ID (value=AmbienteEstado)?;
//    
//Entidade:
//    'criar' name=ID '{'
//        (features+=Feature)*
//    '}';
// 
   	
IotDsl:
	{IotDsl} 'eventos' (eventos+=Evento)* 
	'end' 'resetEventos' (resetEventos+=[Evento])* 
	'end' 'commands' (commands+=Comando)* 
	'end' (estados+=Estado)*;

enum AmbienteEstado:
    ABERTO | VAZIO | CHEIO | FECHADO;

enum acoesPossiveis:
	LIGAR | DESLIGAR | AUMENTAR | DIMINUIR;

Evento:
  name=ID;

Comando:
  name=ID;

Estado:
  'state' name=ID
  ('actions' '{' (actions+=[Comando])+ '}')?
  (transitions+=Transition)*
  'end';

Transition:
  evento=[Evento] '=>' state=[Estado];


